# Ultralytics üöÄ AGPL-3.0 License - https://ultralytics.com/license

# SDC-YOLO (Fixed Version)
# --------------------------------------------------------
# ‰øÆÂ§ç‰∫Ü Stride ÂåπÈÖçÈîôËØØ„ÄÇ
# SDC_Gate ËæìÂá∫ÁöÑÊòØ P2 Â∞∫Â∫¶ (s4)ÔºåÈúÄË¶ÅÂÖàÈôçÈááÊ†∑Âõû P3 (s8)ÔºåÊâçËÉΩÁªßÁª≠Ëµ∞ Neck„ÄÇ
# --------------------------------------------------------

# Parameters
nc: 6 
scales: 
  n: [0.50, 0.25, 1024] 

# Backbone
backbone:
  - [-1, 1, Conv, [64, 3, 2]] # 0
  - [-1, 1, Conv, [128, 3, 2]] # 1-P2/4
  - [-1, 2, C3k2, [256, False, 0.25]]
  - [-1, 1, Conv, [256, 3, 2]] # 3-P3/8
  - [-1, 2, C3k2, [512, False, 0.25]]
  - [-1, 1, Conv, [512, 3, 2]] # 5-P4/16
  - [-1, 2, C3k2, [512, True]]
  - [-1, 1, Conv, [1024, 3, 2]] # 7-P5/32
  - [-1, 2, C3k2, [1024, True]]
  - [-1, 1, SPPF, [1024, 5]] # 9
  - [-1, 2, C2PSA, [1024]] # 10

# Head
head:
  # === DySample ===
  - [-1, 1, DySample, [2, 'lp']] # 11 (P5 -> P4)
  - [[-1, 6], 1, Concat, [1]] 
  - [-1, 2, C3k2, [512, False]] # 13 (P4)

  - [-1, 1, DySample, [2, 'lp']] # 14 (P4 -> P3)
  - [[-1, 4], 1, Concat, [1]] 
  - [-1, 2, C3k2, [256, False]] # 16 (P3 ËØ≠‰πâ)

  # === ScConv ===
  - [1, 1, ScConv, [128]] # 17 (P2)

  # === SDC_Gate (ËæìÂá∫ÊòØ s4) ===
  - [[16, 17], 1, SDC_Gate, [128, 256]] # 18 (P2 Â¢ûÂº∫Áâà, Stride 4)

  # üöÄ [ÂÖ≥ÈîÆ‰øÆÂ§ç] ÂÖàÊää s4 ÈôçÂõû s8 (P3)
  # Ëøô‰∏ÄÂ±ÇÂ∞Ü‰Ωú‰∏∫ Detect Â§¥ÁöÑ P3 ËæìÂÖ•
  - [18, 1, Conv, [256, 3, 2]] # 19 (Stride 8, P3_Refined)

  # === ÁªßÁª≠‰∏ãÈááÊ†∑Âéª P4 ===
  # P3_Refined (19) -> P4
  - [19, 1, Conv, [256, 3, 2]] # 20 (Stride 16)
  - [[-1, 13], 1, Concat, [1]] # 21 (Stride 16 + Stride 16) ‚úÖ ÂåπÈÖçÊàêÂäü
  - [-1, 2, C3k2, [512, False]] # 22 (P4_Refined)

  # === ÁªßÁª≠‰∏ãÈááÊ†∑Âéª P5 ===
  # P4_Refined (22) -> P5
  - [-1, 1, Conv, [512, 3, 2]] # 23 (Stride 32)
  - [[-1, 10], 1, Concat, [1]] # 24
  - [-1, 2, C3k2, [1024, True]] # 25 (P5_Refined)

  # === Detect ===
  # Ê≥®ÊÑèÂ±ÇÂè∑Âèò‰∫Ü: 19(P3), 22(P4), 25(P5)
  - [[19, 22, 25], 1, Detect, [nc]]