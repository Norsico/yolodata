# =============================================================================
# YOLOv11n-Train-Test (10.22 GFLOPs)
# Features:
# 1. Head P3 uses StarNet(k=3) -> ä¸“æ”»å°ç›®æ ‡é¢„æµ‹
# 2. P5 uses StarNet(k=7) -> ä¸“æ”»å…¨å±€è¯­ä¹‰
# 3. Detail Branch (32ch) + RFAConv -> è¡¥å……çº¹ç†ç»†èŠ‚
# =============================================================================

# Parameters
nc: 6 
scales: 
  n: [0.50, 0.25, 1024] 

# Backbone
backbone:
  - [-1, 1, Conv, [64, 3, 2]] # 0
  - [-1, 1, Conv, [128, 3, 2]] # 1-P2/4
  - [-1, 2, C3k2, [256, False, 0.25]] # 2-P3
  - [-1, 1, Conv, [256, 3, 2]] # 3-P3/8
  
  # Backbone P4: C3k2 (ç¨³å¥)
  - [-1, 2, C3k2, [512, False, 0.25]] # 4-P4 
  
  - [-1, 1, Conv, [512, 3, 2]] # 5-P4/16
  
  # Backbone P5: StarNet (å…¨å±€è§†é‡)
  - [-1, 2, C3_Star, [512, True, 1, 0.5, 7]] # 6-P5 
  
  - [-1, 1, Conv, [1024, 3, 2]] # 7-P5/32
  - [-1, 2, C3_Star, [1024, True, 1, 0.5, 7]] # 8-P5
  
  - [-1, 1, SPPF, [1024, 5]] # 9
  - [-1, 2, C2PSA, [1024]] # 10

# Head
head:
  # === DySample ===
  - [-1, 1, DySample, [2, 'lp']] # 11
  - [[-1, 6], 1, Concat, [1]] 
  - [-1, 2, C3k2, [512, False]] # 13 (Head P4)

  - [-1, 1, DySample, [2, 'lp']] # 14
  - [[-1, 4], 1, Concat, [1]] 
  
  # ğŸŒŸ [Head P3] å…³é”®ç‚¹ï¼StarNet(k=3) æ›¿æ¢ C3k2
  # P3 æ˜¯ä¸‰è½®è½¦æ£€æµ‹çš„ä¸»æˆ˜åœºï¼Œè¿™é‡Œç”¨ StarBlock åº”è¯¥èƒ½å¸¦æ¥è´¨å˜
  - [-1, 2, C3_Star, [256, False, 1, 0.5, 3]] # 16 

  # === Detail Branch (32ch) ===
  - [1, 1, Conv, [32, 3, 2]] # 17 
  - [-1, 1, RFAConv, [32]] # 18 

  # === Gate ===
  - [[16, 18], 1, FrequencyGate, [256, 256]] # 19 

  # === Output Path ===
  - [19, 1, Conv, [256, 3, 2]] # 20
  - [[-1, 13], 1, Concat, [1]] # 21
  - [-1, 2, C3k2, [512, False]] # 22

  - [-1, 1, Conv, [512, 3, 2]] # 23
  - [[-1, 10], 1, Concat, [1]] # 24
  - [-1, 2, C3_Star, [1024, True, 1, 0.5, 7]] # 25

  - [[19, 22, 25], 1, Detect, [nc]] # 26
