# Ultralytics ğŸš€ AGPL-3.0 License - https://ultralytics.com/license

# LSK-HFD-YOLO11 (High-Frequency Difference + Large Selective Kernel)
# --------------------------------------------------------
# è¿™æ˜¯ä¸€ä¸ªä¸“é—¨é’ˆå¯¹"å¼±åŠ¿äº¤é€šå‚ä¸è€…"(VRU)è®¾è®¡çš„æ¶æ„ã€‚
# 1. Detail Branch: ä½¿ç”¨åŸåˆ› HFD_Down æ¨¡å—ï¼Œåˆ©ç”¨å·®åˆ†æœºåˆ¶ç‰©ç†å±è”½èƒŒæ™¯ï¼Œåªæå–éª¨æ¶ã€‚
# 2. Fusion: ä½¿ç”¨ LSK-Gateï¼Œåœ¨èåˆå‰è¿›è¡Œå¹¿è§’ä¸Šä¸‹æ–‡ç¡®è®¤ï¼Œè§£å†³ä¾§é¢æ­§ä¹‰ã€‚
# --------------------------------------------------------

# Parameters
nc: 6 
scales: 
  n: [0.50, 0.25, 1024] 

# Backbone (ä¿æŒåŸç”Ÿï¼Œç¨³å¥ç¬¬ä¸€)
backbone:
  - [-1, 1, Conv, [64, 3, 2]] # 0-P1/2
  - [-1, 1, Conv, [128, 3, 2]] # 1-P2/4 <--- ç»†èŠ‚æµæºå¤´
  - [-1, 2, C3k2, [256, False, 0.25]]
  - [-1, 1, Conv, [256, 3, 2]] # 3-P3/8
  - [-1, 2, C3k2, [512, False, 0.25]]
  - [-1, 1, Conv, [512, 3, 2]] # 5-P4/16
  - [-1, 2, C3k2, [512, True]]
  - [-1, 1, Conv, [1024, 3, 2]] # 7-P5/32
  - [-1, 2, C3k2, [1024, True]]
  - [-1, 1, SPPF, [1024, 5]] # 9
  - [-1, 2, C2PSA, [1024]] # 10

# Head (å…¨æ˜æ˜Ÿé˜µå®¹)
head:
  # === DySample ä¸Šé‡‡æ · ===
  - [-1, 1, DySample, [2, 'lp']] # 11
  - [[-1, 6], 1, Concat, [1]] 
  - [-1, 2, C3k2, [512, False]] # 13

  - [-1, 1, DySample, [2, 'lp']] # 14
  - [[-1, 4], 1, Concat, [1]] 
  - [-1, 2, C3k2, [256, False]] # 16 (P3 è¯­ä¹‰æµ)

  # === ğŸš€ [åŸåˆ›ç‚¹] ç»†èŠ‚åˆ†æ”¯ (Detail Branch) ===
  
  # 17: ScConv (ä¿ç•™å®ƒï¼Œå› ä¸º ScConv çš„ç©ºé—´é‡ç»„å¯¹å»å™ªå¾ˆæœ‰ç”¨)
  - [1, 1, ScConv, [128]] 
  
  # 18: ğŸš€ HFD_Down (é«˜é¢‘å·®åˆ†ä¸‹é‡‡æ ·)
  # æ›¿ä»£äº† HWD(å›ºå®š) å’Œ RepConv(æ™®é€š)ï¼Œå¼ºåˆ¶æå–è¾¹ç¼˜
  - [-1, 1, HFD_Down, [128]] 

  # === ğŸš€ [å‡çº§ç‚¹] LSK å¹¿è§’é—¨æ§ ===
  # 19: èåˆ
  - [[16, 18], 1, LSK_FrequencyGate, [128, 256]] 

  # === è¾“å‡ºè·¯å¾„ ===
  - [19, 1, Conv, [256, 3, 2]] 
  - [[-1, 13], 1, Concat, [1]] 
  - [-1, 2, C3k2, [512, False]] # 22

  - [-1, 1, Conv, [512, 3, 2]] 
  - [[-1, 10], 1, Concat, [1]] 
  - [-1, 2, C3k2, [1024, True]] # 25

  - [[19, 22, 25], 1, Detect, [nc]]